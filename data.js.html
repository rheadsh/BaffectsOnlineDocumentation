

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> data.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    API Documentation
                </a>
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                        </div>
                    </div>
                </div>
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="b.html">b</a></li></ul><h3>Global</h3><ul><li><a href="global.html#abs">abs</a></li><li><a href="global.html#acos">acos</a></li><li><a href="global.html#asin">asin</a></li><li><a href="global.html#atan">atan</a></li><li><a href="global.html#atan2">atan2</a></li><li><a href="global.html#binary">binary</a></li><li><a href="global.html#ceil">ceil</a></li><li><a href="global.html#constrain">constrain</a></li><li><a href="global.html#cos">cos</a></li><li><a href="global.html#day">day</a></li><li><a href="global.html#degrees">degrees</a></li><li><a href="global.html#dist">dist</a></li><li><a href="global.html#endsWith">endsWith</a></li><li><a href="global.html#exp">exp</a></li><li><a href="global.html#floor">floor</a></li><li><a href="global.html#forEach">forEach</a></li><li><a href="global.html#go">go</a></li><li><a href="global.html#HashList">HashList</a></li><li><a href="global.html#hex">hex</a></li><li><a href="global.html#hour">hour</a></li><li><a href="global.html#isArray">isArray</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#isURL">isURL</a></li><li><a href="global.html#itemsFromFolder">itemsFromFolder</a></li><li><a href="global.html#itemsFromFolderGUI">itemsFromFolderGUI</a></li><li><a href="global.html#join">join</a></li><li><a href="global.html#lerp">lerp</a></li><li><a href="global.html#loadAI">loadAI</a></li><li><a href="global.html#loadItem">loadItem</a></li><li><a href="global.html#loadSequence">loadSequence</a></li><li><a href="global.html#loadString">loadString</a></li><li><a href="global.html#loadStrings">loadStrings</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#mag">mag</a></li><li><a href="global.html#map">map</a></li><li><a href="global.html#max">max</a></li><li><a href="global.html#millis">millis</a></li><li><a href="global.html#millisecond">millisecond</a></li><li><a href="global.html#min">min</a></li><li><a href="global.html#minute">minute</a></li><li><a href="global.html#month">month</a></li><li><a href="global.html#nf">nf</a></li><li><a href="global.html#nfc">nfc</a></li><li><a href="global.html#nfp">nfp</a></li><li><a href="global.html#nfs">nfs</a></li><li><a href="global.html#norm">norm</a></li><li><a href="global.html#pow">pow</a></li><li><a href="global.html#print">print</a></li><li><a href="global.html#printInfo">printInfo</a></li><li><a href="global.html#println">println</a></li><li><a href="global.html#projectFolder">projectFolder</a></li><li><a href="global.html#radians">radians</a></li><li><a href="global.html#round">round</a></li><li><a href="global.html#saveString">saveString</a></li><li><a href="global.html#saveStrings">saveStrings</a></li><li><a href="global.html#second">second</a></li><li><a href="global.html#sin">sin</a></li><li><a href="global.html#split">split</a></li><li><a href="global.html#splitTokens">splitTokens</a></li><li><a href="global.html#sq">sq</a></li><li><a href="global.html#sqrt">sqrt</a></li><li><a href="global.html#startsWith">startsWith</a></li><li><a href="global.html#tan">tan</a></li><li><a href="global.html#timestamp">timestamp</a></li><li><a href="global.html#trim">trim</a></li><li><a href="global.html#trimWord">trimWord</a></li><li><a href="global.html#unbinary">unbinary</a></li><li><a href="global.html#unhex">unhex</a></li><li><a href="global.html#Vector">Vector</a></li><li><a href="global.html#weekday">weekday</a></li><li><a href="global.html#year">year</a></li></ul></div><div class="category"><h2>Baffects.js</h2><h3>Global</h3><ul><li><a href="global.html#addFX">addFX</a></li><li><a href="global.html#addItemToComp">addItemToComp</a></li><li><a href="global.html#addLayer">addLayer</a></li><li><a href="global.html#addPreset">addPreset</a></li><li><a href="global.html#addToRender">addToRender</a></li><li><a href="global.html#addToRenderAME">addToRenderAME</a></li><li><a href="global.html#adjustmenLayer">adjustmenLayer</a></li><li><a href="global.html#anchor">anchor</a></li><li><a href="global.html#anchorMode">anchorMode</a></li><li><a href="global.html#audioToKeyframes">audioToKeyframes</a></li><li><a href="global.html#background">background</a></li><li><a href="global.html#beginMask">beginMask</a></li><li><a href="global.html#beginShape">beginShape</a></li><li><a href="global.html#beginUndo">beginUndo</a></li><li><a href="global.html#blendingMode">blendingMode</a></li><li><a href="global.html#blendMode">blendMode</a></li><li><a href="global.html#bounds">bounds</a></li><li><a href="global.html#camera">camera</a></li><li><a href="global.html#capMode">capMode</a></li><li><a href="global.html#cleanComp">cleanComp</a></li><li><a href="global.html#clearRenderQueue">clearRenderQueue</a></li><li><a href="global.html#collapseVectors">collapseVectors</a></li><li><a href="global.html#color">color</a></li><li><a href="global.html#createComp">createComp</a></li><li><a href="global.html#createShapes">createShapes</a></li><li><a href="global.html#delay">delay</a></li><li><a href="global.html#deleteComp">deleteComp</a></li><li><a href="global.html#duplicate">duplicate</a></li><li><a href="global.html#ease">ease</a></li><li><a href="global.html#ellipse">ellipse</a></li><li><a href="global.html#endMask">endMask</a></li><li><a href="global.html#endShape">endShape</a></li><li><a href="global.html#endUndo">endUndo</a></li><li><a href="global.html#expression">expression</a></li><li><a href="global.html#fill">fill</a></li><li><a href="global.html#frameCount">frameCount</a></li><li><a href="global.html#frameTime">frameTime</a></li><li><a href="global.html#getAllComps">getAllComps</a></li><li><a href="global.html#getAllFXProperties">getAllFXProperties</a></li><li><a href="global.html#getAllLayers">getAllLayers</a></li><li><a href="global.html#getCenter">getCenter</a></li><li><a href="global.html#getComp">getComp</a></li><li><a href="global.html#getDuration">getDuration</a></li><li><a href="global.html#getIndex">getIndex</a></li><li><a href="global.html#getItem">getItem</a></li><li><a href="global.html#getLayer">getLayer</a></li><li><a href="global.html#getLayers">getLayers</a></li><li><a href="global.html#getProperty">getProperty</a></li><li><a href="global.html#getTotalFrames">getTotalFrames</a></li><li><a href="global.html#height">height</a></li><li><a href="global.html#hsbaToRgba">hsbaToRgba</a></li><li><a href="global.html#interpolationMode">interpolationMode</a></li><li><a href="global.html#isShape">isShape</a></li><li><a href="global.html#itangent">itangent</a></li><li><a href="global.html#key">key</a></li><li><a href="global.html#lastShape">lastShape</a></li><li><a href="global.html#light">light</a></li><li><a href="global.html#line">line</a></li><li><a href="global.html#mask">mask</a></li><li><a href="global.html#maskMode">maskMode</a></li><li><a href="global.html#motionBlur">motionBlur</a></li><li><a href="global.html#moveFrames">moveFrames</a></li><li><a href="global.html#noFill">noFill</a></li><li><a href="global.html#noise">noise</a></li><li><a href="global.html#noiseDetail">noiseDetail</a></li><li><a href="global.html#noiseSeed">noiseSeed</a></li><li><a href="global.html#noStroke">noStroke</a></li><li><a href="global.html#nullLayer">nullLayer</a></li><li><a href="global.html#numLayers">numLayers</a></li><li><a href="global.html#otangent">otangent</a></li><li><a href="global.html#parent">parent</a></li><li><a href="global.html#polygon">polygon</a></li><li><a href="global.html#popMatrix">popMatrix</a></li><li><a href="global.html#preComp">preComp</a></li><li><a href="global.html#printProperties">printProperties</a></li><li><a href="global.html#pushMatrix">pushMatrix</a></li><li><a href="global.html#random">random</a></li><li><a href="global.html#randomGaussian">randomGaussian</a></li><li><a href="global.html#randomSeed">randomSeed</a></li><li><a href="global.html#rect">rect</a></li><li><a href="global.html#removeAllKeyframes">removeAllKeyframes</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#renderAME">renderAME</a></li><li><a href="global.html#resetMatrix">resetMatrix</a></li><li><a href="global.html#reverseLayers">reverseLayers</a></li><li><a href="global.html#rotate">rotate</a></li><li><a href="global.html#scale">scale</a></li><li><a href="global.html#selectedLayers">selectedLayers</a></li><li><a href="global.html#set3DMode">set3DMode</a></li><li><a href="global.html#setComp">setComp</a></li><li><a href="global.html#setCompDuration">setCompDuration</a></li><li><a href="global.html#setMaskMode">setMaskMode</a></li><li><a href="global.html#shape">shape</a></li><li><a href="global.html#shapePuckerBloat">shapePuckerBloat</a></li><li><a href="global.html#shapeRepeater">shapeRepeater</a></li><li><a href="global.html#shapeTrimPaths">shapeTrimPaths</a></li><li><a href="global.html#shapeTwist">shapeTwist</a></li><li><a href="global.html#shapeWigglePaths">shapeWigglePaths</a></li><li><a href="global.html#shapeWiggleTransform">shapeWiggleTransform</a></li><li><a href="global.html#shapeZigZag">shapeZigZag</a></li><li><a href="global.html#slider">slider</a></li><li><a href="global.html#spatialMode">spatialMode</a></li><li><a href="global.html#speed">speed</a></li><li><a href="global.html#speedAll">speedAll</a></li><li><a href="global.html#speedEase">speedEase</a></li><li><a href="global.html#stroke">stroke</a></li><li><a href="global.html#strokeWeight">strokeWeight</a></li><li><a href="global.html#text">text</a></li><li><a href="global.html#textAlign">textAlign</a></li><li><a href="global.html#textAllTransform">textAllTransform</a></li><li><a href="global.html#textAnchorPoint">textAnchorPoint</a></li><li><a href="global.html#textBlur">textBlur</a></li><li><a href="global.html#textCharacterOffset">textCharacterOffset</a></li><li><a href="global.html#textCharacterValue">textCharacterValue</a></li><li><a href="global.html#textFill">textFill</a></li><li><a href="global.html#textFont">textFont</a></li><li><a href="global.html#textOpacity">textOpacity</a></li><li><a href="global.html#textPosition">textPosition</a></li><li><a href="global.html#textRotation">textRotation</a></li><li><a href="global.html#textScale">textScale</a></li><li><a href="global.html#textSize">textSize</a></li><li><a href="global.html#textSkew">textSkew</a></li><li><a href="global.html#textStroke">textStroke</a></li><li><a href="global.html#textStrokeWidth">textStrokeWidth</a></li><li><a href="global.html#timeRemap">timeRemap</a></li><li><a href="global.html#trackMatte">trackMatte</a></li><li><a href="global.html#translate">translate</a></li><li><a href="global.html#vertex">vertex</a></li><li><a href="global.html#width">width</a></li></ul></div><div class="category"><h2>Baffects.js Constants</h2><h3>Global</h3><ul><li><a href="global.html#ADD">ADD</a></li><li><a href="global.html#ALPHA_ADD">ALPHA_ADD</a></li><li><a href="global.html#AMBIENT">AMBIENT</a></li><li><a href="global.html#BUTT">BUTT</a></li><li><a href="global.html#CLASSIC_COLOR_BURN">CLASSIC_COLOR_BURN</a></li><li><a href="global.html#CLASSIC_COLOR_DODGE">CLASSIC_COLOR_DODGE</a></li><li><a href="global.html#CLASSIC_DIFFERENCE">CLASSIC_DIFFERENCE</a></li><li><a href="global.html#CLOSE">CLOSE</a></li><li><a href="global.html#COLOR">COLOR</a></li><li><a href="global.html#COLOR_BURN">COLOR_BURN</a></li><li><a href="global.html#COLOR_DODGE">COLOR_DODGE</a></li><li><a href="global.html#DANCING_DISSOLVE">DANCING_DISSOLVE</a></li><li><a href="global.html#DARKEN">DARKEN</a></li><li><a href="global.html#DARKER_COLOR">DARKER_COLOR</a></li><li><a href="global.html#DIFFERENCE">DIFFERENCE</a></li><li><a href="global.html#DISSABLE">DISSABLE</a></li><li><a href="global.html#DISSOLVE">DISSOLVE</a></li><li><a href="global.html#DIVIDE">DIVIDE</a></li><li><a href="global.html#ENABLE">ENABLE</a></li><li><a href="global.html#EPSILON">EPSILON</a></li><li><a href="global.html#EXCLUSION">EXCLUSION</a></li><li><a href="global.html#HALF_PI">HALF_PI</a></li><li><a href="global.html#HARD_LIGHT">HARD_LIGHT</a></li><li><a href="global.html#HARD_MIX">HARD_MIX</a></li><li><a href="global.html#HUE">HUE</a></li><li><a href="global.html#INACTIVE">INACTIVE</a></li><li><a href="global.html#KAPPA">KAPPA</a></li><li><a href="global.html#LIGHTEN">LIGHTEN</a></li><li><a href="global.html#LIGHTER_COLOR">LIGHTER_COLOR</a></li><li><a href="global.html#LINEAR_BURN">LINEAR_BURN</a></li><li><a href="global.html#LINEAR_DODGE">LINEAR_DODGE</a></li><li><a href="global.html#LINEAR_LIGHT">LINEAR_LIGHT</a></li><li><a href="global.html#LINES">LINES</a></li><li><a href="global.html#LUMINESCENT_PREMUL">LUMINESCENT_PREMUL</a></li><li><a href="global.html#LUMINOSITY">LUMINOSITY</a></li><li><a href="global.html#M_NONE">M_NONE</a></li><li><a href="global.html#MULTIPLY">MULTIPLY</a></li><li><a href="global.html#NORMAL">NORMAL</a></li><li><a href="global.html#OVERLAY">OVERLAY</a></li><li><a href="global.html#PARALLEL">PARALLEL</a></li><li><a href="global.html#PI">PI</a></li><li><a href="global.html#PIN_LIGHT">PIN_LIGHT</a></li><li><a href="global.html#POINT">POINT</a></li><li><a href="global.html#PROJECTING">PROJECTING</a></li><li><a href="global.html#QUADS">QUADS</a></li><li><a href="global.html#QUARTER_PI">QUARTER_PI</a></li><li><a href="global.html#RGB">RGB</a></li><li><a href="global.html#ROUND">ROUND</a></li><li><a href="global.html#SATURATION">SATURATION</a></li><li><a href="global.html#SCREEN">SCREEN</a></li><li><a href="global.html#SILHOUETE_ALPHA">SILHOUETE_ALPHA</a></li><li><a href="global.html#SILHOUETTE_LUMA">SILHOUETTE_LUMA</a></li><li><a href="global.html#SINCOS_LENGTH">SINCOS_LENGTH</a></li><li><a href="global.html#SOFT_LIGHT">SOFT_LIGHT</a></li><li><a href="global.html#SPOT">SPOT</a></li><li><a href="global.html#STENCIL_ALPHA">STENCIL_ALPHA</a></li><li><a href="global.html#STENCIL_LUMA">STENCIL_LUMA</a></li><li><a href="global.html#SUBTRACT">SUBTRACT</a></li><li><a href="global.html#TRIANGLES">TRIANGLES</a></li><li><a href="global.html#TWO_PI">TWO_PI</a></li><li><a href="global.html#VIVID_LIGHT">VIVID_LIGHT</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>data.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>﻿// ----------------------------------------numbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumbernumber
// Data

pub.JSON = {
    /**
     * Function parses and validates a string as JSON-object. Usage:
     * var obj = b.JSON.decode(str);
     * var str = b.JSON.encode(obj);
     *
     * @cat Data
     * @subcat JSON
     * @method JSON.decode
     * @param  {String} String to be parsed as JSON-object.
     *  @returns {Object} Returns JSON-object or throws an error if invalid JSON has been provided.
    */
    // From: jQuery JavaScript Library v1.7.1 http://jquery.com/
    decode: function (data) {
        if (typeof data !== "string" || !data) {
            return null;
        }
        var rvalidchars = /^[\],:{}\s]*$/,
            rvalidescape = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
            rvalidtokens = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
            rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g;

        // Make sure the incoming data is actual JSON
        // Logic borrowed from http://json.org/json2.js
        if (rvalidchars.test(data.replace(rvalidescape, "@")
            .replace(rvalidtokens, "]")
            .replace(rvalidbraces, ""))) {
            return (new Function("return " + data))();
        }
        error("b.JSON.decode(), invalid JSON: " + data);
    },
    /**
     * Function convert an javascript object to a JSON-string. Usage:
     * var str = b.JSON.encode(obj);
     * var obj = b.JSON.decode(str);
     *
     * @cat Data
     * @subcat JSON
     * @method JSON.encode
     * @param  {Object} Object to be converted to a JSON-string
     *  @returns {String} Returns JSON-string
     */
    // From: https://gist.github.com/754454
    encode: function (obj) {
        var t = typeof (obj);
        if (t !== "object" || obj === null) {
            // simple data type
            if (t === "string") obj = '"' + obj + '"';
            return String(obj);
        } else {
            // recurse array or object
            var n, v, json = [], arr = (obj &amp;&amp; obj.constructor === Array);

            for (n in obj) {
                v = obj[n];
                t = typeof (v);
                if (obj.hasOwnProperty(n)) {
                    if (t === "string") v = '"' + v + '"'; else if (t === "object" &amp;&amp; v !== null) v = pub.JSON.encode(v);
                    json.push((arr ? "" : '"' + n + '":') + String(v));
                }
            }
            return (arr ? "[" : "{") + String(json) + (arr ? "]" : "}");
        }
    }
};

// Taken and hijacked from d3.js robust csv parser. Hopefully Michael Bostock won't mind.
// https://github.com/mbostock/d3/tree/master/src/dsv
pub.CSV = new CSV();
function CSV() {
    var reParse = null,
        reFormat = null,
        delimiterStr = null,
        delimiterCode = null;

    initDelimiter(',');
    function initDelimiter(delimiter) {
        reParse = new RegExp("\r\n|[" + delimiter + "\r\n]", "g"), // field separator regex
            reFormat = new RegExp("[\"" + delimiter + "\n]"),
            delimiterCode = delimiter.charCodeAt(0);
        delimiterStr = delimiter;
    };

    /**
     * Sets the delimiter of the CSV decode and encode function.
     *
     * @cat Data
     * @subcat CSV
     * @method CSV.delimiter
     * @param  {String} [delimiter] Optional Sets the delimiter for CSV parsing
     *  @returns {String} Returns the current delimiter if called without argument
    */
    this.delimiter = function (delimiter) {
        if (arguments.length === 0) return delimiterStr;
        if (typeof delimiter === 'string') {
            initDelimiter(delimiter);
        } else {
            error("b.CSV.delimiter, separator has to be a character or string");
        }
    };

    /**
     * Function parses a string as CSV-object Array. Usage:
     * var arr = b.CSV.decode(str);
     * var str = b.CSV.encode(arr);
     *
     * @cat Data
     * @subcat CSV
     * @method CSV.decode
     * @param  {String} String to be parsed as CSV-object.
     *  @returns {Array} Returns CSV-object Array
    */
    this.decode = function (text) {
        var header;
        return parseRows(text, function (row, i) {
            if (i) {
                var o = {}, j = -1, m = header.length;
                while (++j &lt; m) o[header[j]] = row[j];
                return o;
            } else {
                header = row;
                return null;
            }
        });
    };

    /**
     * Function convert an javascript array of objects to a CSV-string. Usage:
     * var str = b.CSV.encode(arr);
     * var arr = b.CSV.decode(str);
     *
     * @cat Data
     * @subcat CSV
     * @method CSV.encode
     * @param  {Array} Array to be converted to a CSV-string
     *  @returns {String} Returns CSV-string
     */
    this.encode = function (rows) {
        var csvStrings = [];
        var header = [];
        var firstRow = rows[0]; // all rows have to have the same properties keys
        // gather infos for the header
        for (var propname in firstRow) {
            if (firstRow.hasOwnProperty(propname)) {
                header.push(propname);
            };
        };
        csvStrings.push(formatRow(header));
        for (var i = 0; i &lt; rows.length; i++) {
            var row = rows[i];
            var tokens = [];
            for (var ii = 0; ii &lt; header.length; ii++) {
                tokens.push(row[header[ii]]);
            };
            csvStrings.push(formatRow(tokens));
        };
        return csvStrings.join("\n");
    };

    function formatRow(row) {
        return row.map(formatValue).join(delimiterStr);
    }

    function formatValue(text) {
        return reFormat.test(text) ? "\"" + text.replace(/\"/g, "\"\"") + "\"" : text;
    }

    function parseRows(text, f) {
        var EOL = {}, // sentinel value for end-of-line
            EOF = {}, // sentinel value for end-of-file
            rows = [], // output rows
            n = 0, // the current line number
            t, // the current token
            eol; // is the current token followed by EOL?

        reParse.lastIndex = 0; // work-around bug in FF 3.6

        function token() {
            if (reParse.lastIndex >= text.length) return EOF; // special case: end of file
            if (eol) { eol = false; return EOL; } // special case: end of line

            // special case: quotes
            var j = reParse.lastIndex;
            if (text.charCodeAt(j) === 34) {
                var i = j;
                while (i++ &lt; text.length) {
                    if (text.charCodeAt(i) === 34) {
                        if (text.charCodeAt(i + 1) !== 34) break;
                        i++;
                    }
                }
                reParse.lastIndex = i + 2;
                var c = text.charCodeAt(i + 1);
                if (c === 13) {
                    eol = true;
                    if (text.charCodeAt(i + 2) === 10) reParse.lastIndex++;
                } else if (c === 10) {
                    eol = true;
                }
                return text.substring(j + 1, i).replace(/""/g, "\"");
            }

            // common case
            var m = reParse.exec(text);
            if (m) {
                eol = m[0].charCodeAt(0) !== delimiterCode;
                return text.substring(j, m.index);
            }
            reParse.lastIndex = text.length;
            return text.substring(j);
        }

        while ((t = token()) !== EOF) {
            var a = [];
            while (t !== EOL &amp;&amp; t !== EOF) {
                a.push(t);
                t = token();
            }
            if (f &amp;&amp; !(a = f(a, n++))) continue;
            rows.push(a);
        }

        return rows;
    };
};

// -- Conversion --

/**  @class b */

/**
 * Converts a byte, char, int, or color to a String containing the
 * equivalent binary notation. For example color(0, 102, 153, 255)
 * will convert to the String "11111111000000000110011010011001". This
 * function can help make your geeky debugging sessions much happier.
 *

 * @cat Data
 * @subcat Conversion
 * @method binary
 * @param {Number} num value to convert
 * @param {Number} [numBits] number of digits to return
 *  @returns {String} A formatted string
 */
// From: http://processingjs.org/reference/binary_/
pub.binary = function (num, numBits) {
    var bit;
    if (numBits > 0) bit = numBits;
    else if (num instanceof Char) {
        bit = 16;
        num |= 0;
    } else {
        bit = 32;
        while (bit > 1 &amp;&amp; !(num >>> bit - 1 &amp; 1)) bit--;
    }
    var result = "";
    while (bit > 0) result += num >>> --bit &amp; 1 ? "1" : "0";
    return result;
};

/**
 * Converts a String representation of a binary number to its
 * equivalent integer value. For example, unbinary("00001000") will
 * return 8.
 *
 * @cat Data
 * @subcat Conversion
 * @method unbinary
 * @param {String} binaryString value to convert
 *  @returns {Number} The integer representation
 */
// From: http://processingjs.org/reference/unbinary_/
pub.unbinary = function (binaryString) {
    var i = binaryString.length - 1,
        mask = 1,
        result = 0;
    while (i >= 0) {
        var ch = binaryString[i--];
        if (ch !== "0" &amp;&amp; ch !== "1") throw "the value passed into unbinary was not an 8 bit binary number";
        if (ch === "1") result += mask;
        mask &lt;&lt;= 1;
    }
    return result;
};


var decimalToHex = function (d, padding) {
    padding = padding === undef || padding === null ? padding = 8 : padding;
    if (d &lt; 0) d = 4294967295 + d + 1;
    var hex = Number(d).toString(16).toUpperCase();
    while (hex.length &lt; padding) hex = "0" + hex;
    if (hex.length >= padding) hex = hex.substring(hex.length - padding, hex.length);
    return hex;
};

/**
 * Convert a number to a hex representation.
 *
 * @cat Data
 * @subcat Conversion
 * @method hex
 * @param {Number} value The number to convert
 * @param {Number} [len] The length of the hex number to be created, default: 8
 *  @returns {String} The hex representation as a string
 */
pub.hex = function (value, len) {
    if (arguments.length === 1) len = 8;
    return decimalToHex(value, len);
};

var unhexScalar = function (hex) {
    var value = parseInt("0x" + hex, 16);
    if (value > 2147483647) value -= 4294967296;
    return value;
}

/**
 * Convert a hex representation to a number.
 *
 * @cat Data
 * @subcat Conversion
 * @method unhex
 * @param {String} hex The hex representation
 *  @returns {Number} The number
 */
pub.unhex = function (hex) {
    if (hex instanceof Array) {
        var arr = [];
        for (var i = 0; i &lt; hex.length; i++) arr.push(unhexScalar(hex[i]));
        return arr;
    }
    return unhexScalar(hex);
};


// -- String Functions --



/**
 * Removes multiple, leading or trailing spaces and punctuation from "words". E.g. converts "word!" to "word". Especially useful together with b.words();
 *
 * @method trimWord
 * @cat Data
 * @subcat String Functions
 * @param {String} s The String to trim
 * @param
 */
// from: http://www.qodo.co.uk/blog/javascript-trim-leading-and-trailing-spaces/
pub.trimWord = function (s) {
    s = s.replace(/(^[,.!?-]*)|([-,.!?]*$)/gi, "");
    s = s.replace(/\s*/gi, "");
    //    s = s.replace(/[ ]{2,}/gi," ");
    s = s.replace(/\n*/, "");
    return s;
};

/**
 * Combines an array of Strings into one String, each separated by
 * the character(s) used for the separator parameter. To join arrays
 * of ints or floats, it's necessary to first convert them to strings
 * using nf() or nfs().
 *
 * @method join
 * @cat Data
 * @subcat String Functions
 * @param {Array} array A string array
 * @param {String} separator The separator to be inserted
 *  @returns {String} The joined string
 */
// http://processingjs.org/reference/join_/
pub.join = function (array, separator) {
    return array.join(separator);
};

/**
 * The split() function breaks a string into pieces using a
 * character or string as the divider. The delim parameter specifies the
 * character or characters that mark the boundaries between each piece. A
 * String[] array is returned that contains each of the pieces.
 *
 * If the result is a set of numbers, you can convert the String[] array
 * to to a float[] or int[] array using the datatype conversion functions
 * int() and float() (see example above).
 *
 * The splitTokens() function works in a similar fashion, except that it
 * splits using a range of characters instead of a specific character or
 * sequence.
 *
 * @cat Data
 * @subcat String Functions
 * @method split
 * @param {String} str the String to be split
 * @param {String} [delim] The string used to separate the data
 *  @returns {Array} Array of strings
 */
// http://processingjs.org/reference/split_/
pub.split = function (str, delim) {
    return str.split(delim);
};

/**
 * The splitTokens() function splits a String at one or many character
 * "tokens." The tokens parameter specifies the character or characters
 * to be used as a boundary.
 *
 * If no tokens character is specified, any whitespace character is used
 * to split. Whitespace characters include tab (\t), line feed (\n),
 * carriage return (\r), form feed (\f), and space. To convert a String
 * to an array of integers or floats, use the datatype conversion functions
 * int() and float() to convert the array of Strings.
 *
 * @cat Data
 * @subcat String Functions
 * @method splitTokens
 * @param {String} str the String to be split
 * @param {String} [tokens] list of individual characters that will be used as separators
 *  @returns {Array} Array of strings
 */
// From: http://processingjs.org/reference/splitTokens_/
pub.splitTokens = function (str, tokens) {
    if (arguments.length === 1) tokens = "\n\t\r\u000c ";
    tokens = "[" + tokens + "]";
    var ary = [];
    var index = 0;
    var pos = str.search(tokens);
    while (pos >= 0) {
        if (pos === 0) str = str.substring(1);
        else {
            ary[index] = str.substring(0, pos);
            index++;
            str = str.substring(pos);
        }
        pos = str.search(tokens);
    }
    if (str.length > 0) ary[index] = str;
    if (ary.length === 0) ary = undef;
    return ary;
};

/* todo */
pub.match = function (str, regexp) {
    return str.match(regexp);
};

/* todo */
pub.matchAll = function (aString, aRegExp) {
    var results = [],
        latest;
    var regexp = new RegExp(aRegExp, "g");
    while ((latest = regexp.exec(aString)) !== null) {
        results.push(latest);
        if (latest[0].length === 0) ++regexp.lastIndex;
    }
    return results.length > 0 ? results : null;
};

function nfCoreScalar(value, plus, minus, leftDigits, rightDigits, group) {
    var sign = value &lt; 0 ? minus : plus;
    var autoDetectDecimals = rightDigits === 0;
    var rightDigitsOfDefault = rightDigits === undef || rightDigits &lt; 0 ? 0 : rightDigits;
    var absValue = Math.abs(value);
    if (autoDetectDecimals) {
        rightDigitsOfDefault = 1;
        absValue *= 10;
        while (Math.abs(Math.round(absValue) - absValue) > 1.0E-6 &amp;&amp; rightDigitsOfDefault &lt; 7) {
            ++rightDigitsOfDefault;
            absValue *= 10;
        }
    } else if (rightDigitsOfDefault !== 0) absValue *= Math.pow(10, rightDigitsOfDefault);
    var number, doubled = absValue * 2;
    if (Math.floor(absValue) === absValue) number = absValue;
    else if (Math.floor(doubled) === doubled) {
        var floored = Math.floor(absValue);
        number = floored + floored % 2;
    } else number = Math.round(absValue);
    var buffer = "";
    var totalDigits = leftDigits + rightDigitsOfDefault;
    while (totalDigits > 0 || number > 0) {
        totalDigits--;
        buffer = "" + number % 10 + buffer;
        number = Math.floor(number / 10);
    }
    if (group !== undef) {
        var i = buffer.length - 3 - rightDigitsOfDefault;
        while (i > 0) {
            buffer = buffer.substring(0, i) + group + buffer.substring(i);
            i -= 3;
        }
    }
    if (rightDigitsOfDefault > 0) return sign + buffer.substring(0, buffer.length - rightDigitsOfDefault) + "." + buffer.substring(buffer.length - rightDigitsOfDefault, buffer.length);
    return sign + buffer;
}
function nfCore(value, plus, minus, leftDigits, rightDigits, group) {
    if (value instanceof Array) {
        var arr = [];
        for (var i = 0, len = value.length; i &lt; len; i++) arr.push(nfCoreScalar(value[i], plus, minus, leftDigits, rightDigits, group));
        return arr;
    }
    return nfCoreScalar(value, plus, minus, leftDigits, rightDigits, group);
}

/**
 * Utility function for formatting numbers into strings. There
 * are two versions, one for formatting floats and one for formatting
 * ints. The values for the digits, left, and right parameters should
 * always be positive integers.

 * As shown in the above example, nf() is used to add zeros to the
 * left and/or right of a number. This is typically for aligning a list
 * of numbers. To remove digits from a floating-point number, use the
 * int(), ceil(), floor(), or round() functions.
 *
 * @cat Data
 * @subcat String Functions
 * @method nf
 * @param {Number} value The Number to convert
 * @param {Number} leftDigits
 * @param {Number} rightDigits
 *  @returns {String} The formatted string
 */
// From: http://processingjs.org/reference/nf_/
pub.nf = function (value, leftDigits, rightDigits) {
    return nfCore(value, "", "-", leftDigits, rightDigits);
};

/**
 * Utility function for formatting numbers into strings. Similar to nf()
 * but leaves a blank space in front of positive numbers so they align
 * with negative numbers in spite of the minus symbol. There are two
 * versions, one for formatting floats and one for formatting ints. The
 * values for the digits, left, and right parameters should always be
 * positive integers.
 *
 * @cat Data
 * @subcat String Functions
 * @method nfs
 * @param {Number} value The Number to convert
 * @param {Number} leftDigits
 * @param {Number} rightDigits
 *  @returns {String} The formatted string
 */
// From: http://processingjs.org/reference/nfs_/
pub.nfs = function (value, leftDigits, rightDigits) {
    return nfCore(value, " ", "-", leftDigits, rightDigits);
};

/**
 * Utility function for formatting numbers into strings. Similar to nf()
 * but puts a "+" in front of positive numbers and a "-" in front of
 * negative numbers. There are two versions, one for formatting floats
 * and one for formatting ints. The values for the digits, left, and right
 * parameters should always be positive integers.
 *
 * @cat Data
 * @subcat String Functions
 * @method nfp
 * @param {Number} value The Number to convert
 * @param {Number} leftDigits
 * @param {Number} rightDigits
 *  @returns {String} The formatted string
 */
// From: http://processingjs.org/reference/nfp_/
pub.nfp = function (value, leftDigits, rightDigits) {
    return nfCore(value, "+", "-", leftDigits, rightDigits);
};

/**
 * Utility function for formatting numbers into strings and placing
 * appropriate commas to mark units of 1000. There are two versions, one
 * for formatting ints and one for formatting an array of ints. The value
 * for the digits parameter should always be a positive integer.
 *
 * @cat Data
 * @subcat String Functions
 * @method nfc
 * @param {Number} value The Number to convert
 * @param {Number} leftDigits
 * @param {Number} rightDigits
 *  @returns {String} The formatted string
 */
// From: http://processingjs.org/reference/nfc_/
pub.nfc = function (value, leftDigits, rightDigits) {
    return nfCore(value, "", "-", leftDigits, rightDigits, ",");
};


/**
 * Removes whitespace characters from the beginning and end of a String.
 * In addition to standard whitespace characters such as space, carriage
 * return, and tab, this function also removes the Unicode "nbsp" character.
 *
 * @cat Data
 * @subcat String Functions
 * @method trim
 * @param {String|Array} str A string or an array of strings to be trimmed
 *  @returns {String|Array} Returns the input in a trimmed way
 */
// From: http://processingjs.org/reference/trim_/
pub.trim = function (str) {
    if (str instanceof Array) {
        var arr = [];
        for (var i = 0; i &lt; str.length; i++) arr.push(str[i].replace(/^\s*/, "").replace(/\s*$/, "").replace(/\r*$/, ""));
        return arr;
    }
    return str.replace(/^\s*/, "").replace(/\s*$/, "").replace(/\r*$/, "");
};

/**
 * Checks whether an URL string is valid.
 *
 * @cat Data
 * @subcat String Functions
 * @method isURL
 * @param {String} url An url string to be checked
 *  @returns {Boolean} Returns either true or false
 */
var isURL = pub.isURL = function (url) {
    var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&amp;%@!\-\/]))?/;
    return pattern.test(url);
};

/**
 * Checks whether a string ends with a specific character or string.
 *
 * @cat Data
 * @subcat String Functions
 * @method endsWith
 * @param {String} str A string to be checked
 * @param {String} suffix The string to look for
 *  @returns {Boolean} Returns either true or false
 */
var endsWith = pub.endsWith = function (str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
};

/**
 * Checks whether a string starts with a specific character or string.
 *
 * @cat Data
 * @subcat String Functions
 * @method startsWith
 * @param {String} str A string to be checked
 * @param {String} prefix The string to look for
 *  @returns {Boolean} Returns either true or false
 */
var startsWith = pub.startsWith = function (str, prefix) {
    return str.indexOf(prefix) === 0;
};


/**
 * Checks whether a var is an Array, returns true if this is the case
 *
 * @cat Data
 * @subcat Type-Check
 * @method isArray
 * @param  {Object|String|Number|Boolean} obj The object to check
 *  @returns {Boolean} returns true if this is the case
 */
var isArray = pub.isArray = function (obj) {
    return Object.prototype.toString.call(obj) === '[object Array]';
};

/**
 * Checks whether a var is a number, returns true if this is the case
 *
 * @cat Data
 * @subcat Type-Check
 * @method isNumber
 * @param  {Object|String|Number|Boolean}  num The number to check
 *  @returns {Boolean} returns true if this is the case
 */
var isNumber = pub.isNumber = function (num) {
    return !isNaN(parseFloat(num)) &amp;&amp; isFinite(num);
};

/**
 * Checks whether a var is a string, returns true if this is the case
 *
 * @cat Data
 * @subcat Type-Check
 * @method isString
 * @param  {Object|String|Number|Boolean} str The string to check
 *  @returns {Boolean} returns true if this is the case
 */
var isString = pub.isString = function (str) {
    return Object.prototype.toString.call(str) === '[object String]';
};

var initDataFile = function (file, mustExist) {
    var result = null;
    if (file instanceof File) {
        result = file;
    } else {
        //var folder = new Folder(projectFolder().absoluteURI + '/data');
        //Adapt function for After Effects
        var folder = new Folder(projectFolder() + '/data');
        if (!folder.exists)
            folder.create(); // creates data folder if not existing, otherwise it just skips
        result = new File(folder.absoluteURI + '/' + file);
    }
    if (mustExist &amp;&amp; !result.exists) {
        error('The file "' + result + '" does not exist.');
    }
    return result;
};

var initExportFile = function (file, mustExist) {
    var result = null;
    if (file instanceof File) {
        result = file;
    } else {

        // get rid of some special cases the user might specify
        var pathNormalized = file.split("/");
        for (var i = 0; i &lt; pathNormalized.length; i++) {
            if (pathNormalized[i] === "" || pathNormalized[i] === ".") {
                pathNormalized.splice(i, 1);
            };
        };
        // var tmpPath = projectFolder().absoluteURI;
        //Adapt function for After Effects
        var tmpPath = projectFolder() + '/data';
        var fileName = pathNormalized[pathNormalized.length - 1];

        // contains the path folders? if so create them ...
        if (pathNormalized.length > 1) {
            var folders = pathNormalized.slice(0, -1);
            for (var i = 0; i &lt; folders.length; i++) {
                tmpPath += "/" + folders[i]
                var f = new Folder(tmpPath);
                if (!f.exists) f.create();
            };
        }

        // result = new File(projectFolder().absoluteURI + '/' + file);
        result = new File(tmpPath + '/' + fileName);
    }
    if (mustExist &amp;&amp; !result.exists) {
        error('The file "' + result + '" does not exist.');
    }
    return result;
};

/**
 * Get the folder of the active document as a Folder object. Use .absoluteURI to access a string representation of the folder path.
 *
 * @cat Document
 * @subcat Misc
 * @method projectFolder
 *  @returns {Folder} The folder of the the active document
 */
var projectFolder = pub.projectFolder = function () {
    var docPath = null;
    try {
        //Adapt function for After Effects
        docPath = app.project.file.path;
    } catch (e) {
        error("The current document must be saved before its project directory can be accessed.");
    }
    return docPath;
};

/**
 * Reads the contents of a file or loads an URL into a String.
 * If the file is specified by name as String, it must be located in the document's data directory.
 *
 * @cat Data
 * @subcat Input
 * @method loadString
 * @param  {String|File} fileOrString The text file name in the document's data directory or a File instance or an URL
 *  @returns {String}  String file or URL content.
 */
pub.loadString = function (fileOrString) {
    if (isURL(fileOrString)) {
        return getURL(fileOrString);
    } else {
        var inputFile = initDataFile(fileOrString, true),
            data = null;
        inputFile.open('r');
        data = inputFile.read();
        inputFile.close();
        return data;
    }
};

var getURL = function (url) {
    if (isURL(url)) {
        if (Folder.fs === "Macintosh") {
            return pub.shellExecute("curl -m 15 -L '" + url + "'");
        } else {
            error("Loading of strings via an URL is a Mac only feature at the moment. Sorry!")
        }
    } else {
        error("The url " + url + " is not a valid one. Please double check!")
    }
};

/**
 * Reads the contents of a file or loads an URL and creates a String array of its individual lines.
 * If the file is specified by name as String, it must be located in the document's data directory.
 *
 * @cat Data
 * @subcat Input
 * @method loadStrings
 * @param  {String|File} file The text file name in the document's data directory or a File instance or an URL
 *  @returns {String[]}  Array of the individual lines in the given File or URL
 */
pub.loadStrings = function (file) {
    if (isURL(file)) {
        var result = getURL(file);
        return result.match(/[^\r\n]+/g);
    } else {
        var inputFile = initDataFile(file, true),
            result = [];
        inputFile.open('r');
        while (!inputFile.eof) {
            result.push(inputFile.readln());
        }
        inputFile.close();
        return result;
    }
};


// ----------------------------------------
// Output

/**
 * Prints a message line to the console output in the ExtendScript editor.
 *
 * @cat Output
 * @method println
 * @param {String} msg The message to print
 */
var println = pub.println = function (msg) {
    $.writeln(msg);
};

/**
 * Prints a message to the console output in the ExtendScript editor, but unlike b.println() it doesn't return the carriage to a new line at the end.
 *
 * @cat Output
 * @method print
 * @param {String} msg The message to print
 */
pub.print = function (msg) {
    $.write(msg);
};

/**
 * Print numerous information about the current environment to the console
 *
 * @cat Output
 * @method printInfo
 */
pub.printInfo = function () {

    pub.println("###");
    pub.println("OS: " + $.os);
    pub.println("ExtendScript Build: " + $.build);
    pub.println("ExtendScript Version:" + $.version);
    pub.println("Engine: " + $.engineName);
    pub.println("memCache: " + $.memCache + " bytes");
    pub.println("###");

};

/**
 * Writes an array of strings to a file, one line per string.
 * If the given file exists it gets overridden.
 *
 * @cat Output
 * @method saveStrings
 * @param  {String|File} file The file name or a File instance
 * @param  {String[]} strings The string array to be written
 */
pub.saveStrings = function (file, strings) {
    var outputFile = initDataFile(file);
    outputFile.open('w');
    forEach(strings, function (s) {
        outputFile.writeln(s);
    });
    outputFile.close();
};

/**
 * Writes a string to a file.
 * If the given file exists it gets overridden.
 *
 * @cat Output
 * @method saveString
 * @param  {String|File} file The file name or a File instance
 * @param  {String} string The string to be written
 */
pub.saveString = function (file, string) {
    var outputFile = initDataFile(file);
    outputFile.open('w');
    outputFile.write(string);
    outputFile.close();
};</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

</body>
</html>
